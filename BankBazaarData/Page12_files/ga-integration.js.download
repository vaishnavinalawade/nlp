!function(e,n,t,a){t.modules({"webengage/ga-integration":[function(n,i,o){"use strict";function g(n){var t;return n?b?t=e[v].getAll()[0].get("trackingId"):e[v](function(e){t=e.get("trackingId")}):t=e._gat._getTrackerByName(y)._getAccount(),t}function r(n){var t="",a=!1;return"undefined"!=typeof GoogleAnalyticsObject&&"undefined"!=typeof v&&"function"==typeof e[v]&&GoogleAnalyticsObject===v&&(a=!0,t=g(!0),t===n)?!0:e._gaq&&e._gat&&(t=g(!1),t===n)?!1:a}function c(){return!(!e.gtag||"function"!=typeof e.gtag)}function u(){if(!d){var n=e[v].getAll()[0].get("clientId"),t=g(!0);n&&t&&(e[v]("create",t,{clientId:n}),d=!0)}}function l(n,t,a,i,o){var g={eventCategory:n,eventAction:t,eventLabel:a,eventValue:i,nonInteraction:"boolean"==typeof o&&o?1:0},l={event_category:n,event_label:a,event_title:i,non_interaction:!("boolean"!=typeof o||!o)};if(c())e.gtag("event",t,l);else if(r(f.get("webengage.ga.trackerId"))){var s=ga.getAll().length,y=function(){p||ga.getAll().length!==s?p=!0:(u(),e[v](f.get("webengage._gaTracker")+"send","event",g),b=!1)};b?e.dataLayer&&(g.event=n,g.eventCallback=y,dataLayer.push(g)):e[v](f.get("webengage._gaTracker")+"send","event",g)}else e._gaq&&(b?e.dataLayer&&(g.event=n,g.eventCallback=y,dataLayer.push(g)):e._gaq.push([f.get("webengage._gaTracker")+"_trackEvent",n,t,a,i,!("boolean"!=typeof o||!o)]))}var f=t.require("webengage/weq"),s=t.require("webengage/util"),v=f.get("GA.universalAnalyticsFunction")||f.get("webengage.GA.universalAnalyticsFunction")||"ga";webengage_fs_configurationMap._gaTracker?f.set("webengage._gaTracker",webengage_fs_configurationMap._gaTracker+"."):"function"==typeof e[v]&&e[v].getAll()[0].get("name")?f.set("webengage._gaTracker",e[v].getAll()[0].get("name")+"."):f.set("webengage._gaTracker","");var b=f.get("webengage.ga.gtm")||!1,y=webengage_fs_configurationMap._gaTracker||"",d=!1,p=!1,_={survey:{onSubmit:function(e){function n(e){return"array"===s.type(e)?e.join(","):s.stringify(e)}var t=e.questionResponses;if(t&&t.length>0)for(var a=0;a<t.length;a++){var i=t[a],o="",g="";if(i.value)switch(i.value["@class"]){case"text":o=i.value.text;break;case"file":o=i.value.fileName+" | "+i.value.fileSize;break;case"score":o=i.value.value;break;default:o=n(i.value.values),i.value.additionalInfo&&(g=i.value.additionalInfo[o])}o=g?o+": "+g:o,l("WebEngage-Survey","survey-question-response ( "+o+" )","Question [S:"+e.surveyId+"] [Q:"+i.questionId+"] "+i.questionText)}},onComplete:function(e){l("WebEngage-Survey","survey-complete","Survey [S:"+e.surveyId+"] "+e.title,e.questionResponses.length)},onOpen:function(e){l("WebEngage-Survey","survey-open","Survey [S:"+e.surveyId+"] "+e.title,a,!0)},onClose:function(e){l("WebEngage-Survey","survey-close","Survey [S:"+e.surveyId+"] "+e.title,a,!0)}},notification:{onOpen:function(e){l("WebEngage-Notification","notification-open","Notification [N:"+e.notificationId+"] "+e.title,a,!0)},onClose:function(e){l("WebEngage-Notification","notification-close","Notification [N:"+e.notificationId+"] "+e.title)},onClick:function(e){l("WebEngage-Notification","notification-click","Notification [N:"+e.notificationId+"] "+e.title)}},feedback:{onOpen:function(e){l("WebEngage-Feedback","feedback-open")},onSubmit:function(e){var n=e.id;l("WebEngage-Feedback","feedback-submit",n?"[F:"+n+"]":a)}}};o.init=function(){for(var e in _)if(_.hasOwnProperty(e))for(var n in _[e])_[e].hasOwnProperty(n)&&t[e][n](_[e][n])}},{}]},{},[])}(window,document,webengage);